\documentclass[xelatex,hyperref={pdfpagelabels=false}]{beamer}

\usetheme{hbm}

\usepackage[ngerman]{babel}
\usepackage[babel,ngerman=guillemets]{csquotes}
\usepackage{fixltx2e}
\usepackage{fontspec}
\usepackage{xltxtra}
\usepackage{xunicode}
\usepackage{graphicx}
\usepackage{listings}
\usepackage{url}

\usepackage{tikz}
\usetikzlibrary{arrows,backgrounds,fit,decorations.pathmorphing,positioning,chains,calc}


\defaultfontfeatures{Mapping=tex-text}
\setmainfont{Myriad Pro}
\setsansfont{Myriad Pro}
\setmonofont{Courier Std}

\beamertemplatenavigationsymbolsempty

\title[jet] % short title, used for footer
{jet: Semantik für zbus}

\author{Gerhard Lipp}

\institute[T-GS/HBM]
{
    T-GS, Hottinger Baldwin Messtechnik GmbH\\
    Tel: 49 (0) 6151 8038344\\
    gerhard.lipp@hbm.com
}

\date{29. März 2012}

\subject{Informatik}

\begin{document}
{
\setbeamertemplate{footline}[hbm title]
\setbeamertemplate{title page}[hbm]
\begin{frame}
  \titlepage
\end{frame}
}

\setbeamertemplate{footline}[hbm]

\begin{frame}[fragile]{Allgemein}
\begin{block}{jet}
\begin{itemize}
\item Hierarchie
\item Knoten
\item Zustand
\item Methoden
\item JSON
\end{itemize}
\end{block}
\end{frame}

\begin{frame}[fragile]{Brocken}
\begin{block}{jet url}
Bezeichnet eindeutig eine \textbf{Methode} oder einen \textbf{Zustand}.
Impliziert eine \textbf{Hierachie}.
Knoten werden mir Punkt (``.'') abgegrenzt.
\end{block}
\begin{alertblock}{Beispiel}
  \begin{lstlisting}
    system.uuid
  \end{lstlisting}
\end{alertblock}
\end{frame}

\begin{frame}[fragile]{Brocken}
\begin{block}{jet domain}
Ein jet Teilnehmer, der eine \textbf{Gruppe} von Methoden und Zustände
exponiert und/oder andere Methoden aufruft oder Zustände ändert.
\end{block}
\begin{alertblock}{Beispiel}
  streamng.lua exponiert die \textbf{stream.*} domain.
  \begin{lstlisting}
    stream.172_19_1_111_22102.subscribe 
    stream.172_19_1_112_22102.unsubscribe 
  \end{lstlisting}
\end{alertblock}
\end{frame}

\begin{frame}[fragile]{Brocken}
\begin{block}{jet events}
Domains können \textbf{jederzeit} Notifications für folgende Ereignisse verschicken:
\begin{itemize}
\item ``Neues Blatt (Methode oder Zustand) ist entstanden''
\item ``(Altes) Blatt ist verschwunden''
\item ``Exponierter Zustand hat sich geändert''
\end{itemize}
\end{block}
\end{frame}

\begin{frame}[fragile]{Brocken}
\begin{block}{jetcached}
\textbf{Zustands-} und \textbf{Knotencache} der jet domains.
\begin{itemize}
  \item Erzeugt Knoten rekursiv (url)
  \item Entfernt Knoten rekursiv (url)
  \item Cached alle Zustände
  \item Hat vollständiges Bild
  \item Beantwortet alle Zustandsabfragen
\end{itemize}
\end{block}
\end{frame}


\begin{frame}[fragile]{Konsequenzen}
\begin{block}{Hierarchie}
  \begin{itemize}
  \item Domains kennen nur ihre Blätter
  \item jetcached kennt die komplette Hierarchie
  \item Kann über Domains leicht verteilt werden
  \end{itemize}
\end{block}
\end{frame}

\begin{frame}[fragile]{Konsequenzen}
\begin{block}{Domains}  
  \begin{itemize}
  \item Posten (interne) Änderungen!
  \item Führen Zustandsänderung aus (``setter'')
  \item Führen Methoden aus
  \end{itemize}
\end{block}
\end{frame}

\begin{frame}[fragile]{Konsequenzen}
\begin{block}{jetchache + Events}  
  \begin{itemize}
  \item Warten/Synchronisieren auf Knoten/Methoden/Zustände möglich
  \end{itemize}
\end{block}
\end{frame}

\begin{frame}[fragile]{Beispiel}
  \begin{block}{Methoden/Dienste anmelden}
  \begin{lstlisting}
    hd = jet.domain('horst')
    hd.add_method('add_arguments_and_jump',
       function(a,b,c)
          sum = a+b+c
          jump()
          return sum
       end)
  \end{lstlisting}
\end{block}
\end{frame}

\begin{frame}[fragile]{Beispiel}
  \begin{block}{Methoden/Dienste aufrufen}
  \begin{lstlisting}
    sum = jet.call('horst.add_arguments_and_jump',
                   33,12,44)
  \end{lstlisting}
\end{block}
\end{frame}

\begin{frame}[fragile]{Beispiel}
  \begin{block}{Zustand/Property anmelden}
  \begin{lstlisting}
    hd = jet.domain('horst')
    name_changed = 
       hd.add_property('info.name',
          function(new_name)
             set_horst_name(new_name)
          end
       )
    ...
    name_changed('dieter')
  \end{lstlisting}
\end{block}
\end{frame}

\begin{frame}[fragile]{Beispiel}
  \begin{block}{Zustand abfragen/ändern}
  \begin{lstlisting}
    jet.set('horst.info.name','susi')
    name = jet.get('horst.info.name')
  \end{lstlisting}
\end{block}
\end{frame}

\begin{frame}[fragile]{Beispiel}
  \begin{block}{Zustandsänderungen}
  \begin{lstlisting}
    jet.on_change('horst.info.name',
         function(name)
              print('haha',name,'is a funny name')
          end
    )
  \end{lstlisting}
\end{block}
\end{frame}

\begin{frame}[fragile]{Beispiel}
  \begin{block}{Warten/Synchronisieren}
  \begin{lstlisting}
    jet.require('horst.info.name',function()
           print('hello')
        end)
  \end{lstlisting}
\end{block}
\end{frame}



\setbeamertemplate{title page}[hbm last page][Danke schön!]
\begin{frame}
  \titlepage
\end{frame}

\end{document}


